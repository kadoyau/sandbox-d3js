<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>テスト</title>
</head>
<body>
    <p>hoge 1</p>
    <p>hoge 2</p>
    <p>hoge 3</p>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>
        /*
        @see https://github.com/d3/d3/blob/master/API.md
        1. 要素を指定して
        select selectAll

        2. 設定したり取得したり
        text,attr,style,append,remove
        */
        p = d3.select("body").selectAll("p");

        /*
        dataを使うタイミングで仮想領域が作られる

        update: データに対して対応する要素がある場合 -> textなどでいじる
        enter: データに対して対応する要素がない場合 -> append
        exit: データに対して対応する要素が余った場合 -> remove
        */

        // データがp要素より多い場合
        var dataset = [12, 24];

        // dataに対応するp要素があれば内容を書き換える
        var update = p.data(dataset);
        update.text(
            (d) => {
                return "update: " + d;
            }
        );

        // データがp要素より足りなければ取り除く
        var exit = update.exit();
        exit.style("color", "red").remove();


        // データに対応するp要素がなければappendする
        var enter = update.enter();
        enter.append("p").text(
            (d) => {
                return "enter: " + d;
            }
        )

    </script>
</body>
</html>
